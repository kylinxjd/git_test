<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
<!--    <template id="qc_certificate_item_para_template">-->
<!--        <span>实际记录：</span>-->
<!--        <br/>-->
<!--        <t t-foreach="actual_values" t-as="para_name">-->
<!--            <span t-esc="para_name"/>-->
<!--            <span>: </span>-->
<!--            <t t-foreach="actual_values[para_name]" t-as="value">-->
<!--                <span t-esc="value"/>-->
<!--            </t>-->
<!--            <br/>-->
<!--        </t>-->
<!--    </template>-->

    <template id="qc_certificate_preview_template">
        <t t-call="web.html_container">
            <t t-call="web.basic_layout">
                <t t-set="first_doc" t-value="docs.sorted(key=lambda doc:len(doc.item_ids),reverse=True)[0]"/>
                <div class="page">
                    <div class="row">
                        <div class="col-9">
                            <h2 style="text-align: center;">制品检查成绩表</h2>
                        </div>
                        <div class="col-3">
                            <table class="table table-sm table-bordered" style="color: red;">
                                <tbody>
                                    <tr>
                                        <td>区分</td>
                                        <td>Confidential</td>
                                    </tr>
                                    <tr>
                                        <td>关系者</td>
                                        <td>品管人员</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td width="10%">品番</td>
                                <td width="20%">
                                    <span t-field="first_doc.product_id"/>
                                </td>
                                <td width="10%">数量</td>
                                <td width="10%">
                                    <span>--</span>
                                    <span>（实际组立数）</span>
                                </td>
                                <td width="10%">组立日</td>
                                <td width="15%">
                                    <span>--</span>
                                    <span>（组立日期）</span>
                                </td>
                                <td width="10%">检查日</td>
                                <td width="15%">
                                    <span>--</span>
                                    <span>（检查日期）</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered" style="table-layout:fixed;word-break:break-all;">
                        <thead>
                            <tr>
                                <th style="width: 2rem;">No</th>
                                <th width="15%">项目</th>
                                <th width="15%">检查内容</th>
                                <th width="20%">检查条件及方法</th>
                                <th width="50%">判定基准</th>
                                <t t-foreach="enumerate(docs,1)" t-as="doc_with_index">
                                    <th style="width: 2rem;">
                                        <t t-esc="doc_with_index[0]"/>
                                    </th>
                                </t>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="first_doc.item_ids" t-as="cert_line">
                                <tr>
                                    <td style="width: 2rem;">
                                        <span t-field="cert_line.subject_no"/>
                                    </td>
                                    <td>
                                        <span t-field="cert_line.work_subject"/>
                                    </td>
                                    <td>
                                        <span t-field="cert_line.work_content"/>
                                    </td>
                                    <td>
                                        <span t-field="cert_line.key_point"/>
                                    </td>
                                    <td>
<!--                                        <t t-raw="cert_line.work_description"/>-->
                                        <span>（不带图片的管理项目 + 实际记录）</span>
                                    </td>
                                    <t t-foreach="docs" t-as="doc">
                                        <td t-options="{'style':'width: 8rem;'}">
                                            <span>合/否</span>
                                        </td>
                                    </t>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td>特记事项：</td>
                                <td>最终判定</td>
                                <td>作成</td>
                                <td>确认</td>
                                <td>承认</td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <span>合/否</span>
                                </td>
                                <td>
                                    <span style="color: red;" t-field="first_doc.create_uid.stamp"
                                          t-options="{'widget': 'image','style':'max-width: 5rem;'}"/>
                                    <span>(作成人印章)</span>
                                </td>
                                <td>
                                    <t t-if="first_doc.confirm_user_1_id">
                                        <span style="color: red;" t-field="first_doc.confirm_user_1_id.stamp"
                                              t-options="{'widget': 'image','style':'max-width: 5rem;'}"/>
                                    </t>
                                    <span>(确认人印章)</span>
                                </td>
                                <td>
                                    <t t-if="first_doc.approve_user_id">
                                        <span style="color: red;" t-field="first_doc.approve_user_id.stamp"
                                              t-options="{'widget': 'image','style':'max-width: 5rem;'}"/>
                                        <span style="color: red;"
                                              t-if="not first_doc.approve_user_id.has_group('toto_qc.qc_manager')">
                                            (代)
                                        </span>
                                    </t>
                                    <span>(承认人印章)</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="footer" id="minimal_layout_report_footers">
                        <div class="text-right" style="border-top: 1px solid black;">
                            <span>TSC/QR(Q)-04-06</span>
                            <div t-if="report_type == 'pdf'" class="text-muted">
                                <span>页码:</span>
                                <span class="page"/>
                                /
                                <span class="topage"/>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </t>
    </template>
</odoo>